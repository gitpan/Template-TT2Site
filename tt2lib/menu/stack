[% # $Id: stack,v 1.2 2004/12/05 11:57:46 jv Exp $ -%]
[%

pending = [ menu ];

WHILE pending.size;
    menu = pending.shift;

    "<p>\n";
    FOREACH item = menu.items;
	PROCESS menu/text
	  link = {
	    text     = item.name
	    url      = site.topdir _ item.url
	    class    = item.hot ? 'menuselect' : 'menu'
	  };

	"<br />\n";

	pending.push(item)
	  IF item.subs;
    END;
    "</p>\n";
END;

-%]
